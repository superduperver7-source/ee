local Players = game:GetService("Players")
local RunService = game:GetService("RunService")
local player = Players.LocalPlayer
local character = player.Character or player.CharacterAdded:Wait()
local humanoidRootPart = character:WaitForChild("HumanoidRootPart")

local speed = 15
local flying = false

local workspace = game:GetService("Workspace")
local basePart
for _, part in ipairs(workspace:GetDescendants()) do
    if part:IsA("BasePart") and part:GetAttribute("IsBase") then
        basePart = part
        break
    end
end

if not basePart then
    warn("Base part with attribute 'IsBase' not found!")
    return
end

local function flyToBase()
    flying = true
    while flying and (humanoidRootPart.Position - basePart.Position).Magnitude > 1 do
        local direction = (basePart.Position - humanoidRootPart.Position).Unit
        humanoidRootPart.CFrame = humanoidRootPart.CFrame + direction * speed * RunService.Heartbeat:Wait()
    end
end

local screenGui = Instance.new("ScreenGui")
screenGui.Parent = player:WaitForChild("PlayerGui")

local flyButton = Instance.new("TextButton")
flyButton.Size = UDim2.new(0, 200, 0, 50)
flyButton.Position = UDim2.new(0, 20, 0, 20)
flyButton.Text = "Fly to Base"
flyButton.BackgroundColor3 = Color3.fromRGB(50,50,50)
flyButton.TextColor3 = Color3.fromRGB(255,255,255)
flyButton.Parent = screenGui

local stopButton = Instance.new("TextButton")
stopButton.Size = UDim2.new(0, 200, 0, 50)
stopButton.Position = UDim2.new(0, 20, 0, 80)
stopButton.Text = "Stop Flying"
stopButton.BackgroundColor3 = Color3.fromRGB(150,50,50)
stopButton.TextColor3 = Color3.fromRGB(255,255,255)
stopButton.Parent = screenGui

flyButton.MouseButton1Click:Connect(flyToBase)
stopButton.MouseButton1Click:Connect(function()
    flying = false
end)
