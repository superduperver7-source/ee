local Players = game:GetService("Players")
local RunService = game:GetService("RunService")
local player = Players.LocalPlayer
local char = player.Character or player.CharacterAdded:Wait()
local hrp = char:WaitForChild("HumanoidRootPart")

local ScreenGui = Instance.new("ScreenGui")
ScreenGui.Parent = player:WaitForChild("PlayerGui")

local Toggle = Instance.new("TextButton")
Toggle.Size = UDim2.new(0,200,0,40)
Toggle.Position = UDim2.new(0.05,0,0.1,0)
Toggle.Text = "Hitbox Extender: OFF"
Toggle.BackgroundColor3 = Color3.fromRGB(30,30,30)
Toggle.TextColor3 = Color3.fromRGB(255,255,255)
Toggle.Parent = ScreenGui

local extenderEnabled = false
Toggle.MouseButton1Click:Connect(function()
	extenderEnabled = not extenderEnabled
	Toggle.Text = extenderEnabled and "Hitbox Extender: ON" or "Hitbox Extender: OFF"
end)

local hitbox = Instance.new("Part")
hitbox.Anchored = true
hitbox.CanCollide = false
hitbox.Transparency = 0.5
hitbox.Size = Vector3.new(10,10,10)
hitbox.Color = Color3.fromRGB(0,255,0)
hitbox.Parent = workspace

local INTERACT_DISTANCE = 10

RunService.RenderStepped:Connect(function()
	if extenderEnabled and hrp then
		hitbox.CFrame = hrp.CFrame
		for _, obj in ipairs(workspace:GetDescendants()) do
			if obj:IsA("BasePart") and (obj.Position - hrp.Position).Magnitude <= INTERACT_DISTANCE then
				if obj:FindFirstChildWhichIsA("TouchTransmitter") then
					for _, conn in ipairs(obj:GetConnections()) do
						conn:Fire(hitbox)
					end
				end
			end
		end
	else
		hitbox.CFrame = CFrame.new(0,-9999,0)
	end
end)

player.CharacterAdded:Connect(function(newChar)
	char = newChar
	hrp = char:WaitForChild("HumanoidRootPart")
end)
